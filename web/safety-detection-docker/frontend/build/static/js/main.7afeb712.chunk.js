(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{23:function(e,t,a){},26:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){"use strict";a.r(t);var s=a(1),c=a.n(s),n=a(18),o=a.n(n),i=a(13),r=a(5),l=a(46),d=a.p+"static/media/logo.4cc933d0.png",j=(a(23),a(4));var b=e=>{let{setIsLoggedIn:t}=e;const a=Object(r.p)();return Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)("div",{className:"logo",onClick:()=>{a("/")},children:Object(j.jsx)("img",{src:d,alt:"Logo"})}),Object(j.jsx)("nav",{className:"nav",children:Object(j.jsx)("button",{onClick:async()=>{try{await l.a.post("/api/logout/",{}),t(!1),a("/login")}catch(e){console.error("\ub85c\uadf8\uc544\uc6c3 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}},className:"nav-item",children:"Logout"})})]})};var p=()=>{const e=Object(r.p)();return Object(j.jsxs)("header",{className:"header",children:[Object(j.jsx)("div",{className:"logo",onClick:()=>{e("/")},children:Object(j.jsx)("img",{src:d,alt:"Logo"})}),Object(j.jsxs)("nav",{className:"nav",children:[Object(j.jsx)("button",{onClick:()=>e("/login"),className:"nav-item",children:"Login"}),Object(j.jsx)("button",{onClick:()=>e("/register"),className:"nav-item",children:"Register"})]})]})};var u=()=>{const[e,t]=Object(s.useState)(!1);return Object(s.useEffect)((()=>{(async()=>{try{const e=await l.a.get("/api/check_login/");t(e.data.is_logged_in)}catch(e){console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}})()}),[]),e?Object(j.jsx)(b,{setIsLoggedIn:t}):Object(j.jsx)(p,{})},m=a.p+"static/media/footer_logo.6f08e44e.png";a(39);var g=()=>{const e=Object(r.p)();return Object(j.jsxs)("footer",{className:"footer",children:[Object(j.jsx)("img",{src:m,alt:"Footer Logo",className:"footer-logo",onClick:()=>e("/")}),Object(j.jsx)("p",{className:"footer-text",children:"\u213a All rights reversed."})," ",Object(j.jsx)("p",{className:"footer-text",children:"Contact:  | @gmail.com"})]})};var x=e=>{let{children:t}=e;return Object(j.jsxs)("div",{style:{display:"flex",flexDirection:"column",minHeight:"100vh"},children:[Object(j.jsx)(u,{}),Object(j.jsx)("main",{style:{flex:"1",padding:"20px"},children:t}),Object(j.jsx)(g,{})]})},h=a(22),O=a(15),y=a.n(O);var f=()=>{const[e,t]=Object(s.useState)(!1),[a,c]=Object(s.useState)(null),[n,o]=Object(s.useState)(null),[i,d]=Object(s.useState)([]),[b,p]=Object(s.useState)([]),[u,m]=Object(s.useState)([]),[g,x]=Object(s.useState)(null),[O,f]=Object(s.useState)(null),[v,N]=Object(s.useState)([]),[S,w]=Object(s.useState)(null);Object(r.p)();Object(s.useEffect)((()=>{(async()=>{try{const e=await l.a.get("/api/check_login/");if(t(e.data.is_logged_in),e.data.is_logged_in){const e=await l.a.get("/api/user_info/");console.log("User Info:",e.data),o(e.data),k(),_(),C(),D()}}catch(e){console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}})(),(async()=>{try{const e=await l.a.get("/api/csrf_token/");c(e.data.csrfToken),l.a.defaults.headers.common["X-CSRFToken"]=e.data.csrfToken}catch(e){console.error("CSRF \ud1a0\ud070\uc744 \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}})();const a=setInterval((()=>{e&&(C(),D())}),6e5);return()=>clearInterval(a)}),[e]);const k=async()=>{try{const e=await l.a.get("/api/get_status/");d(e.data.statuses),I(e.data.statuses)}catch(e){console.error("\uc0ac\uc6a9\uc790 \uc0c1\ud0dc\ub97c \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}},C=async()=>{try{const e=await l.a.post("/api/update_status/",{}),t=e.data.status;N(e.data.bio_data),w(t),k(),1!==t&&2!==t||T(e.data.bio_data,t)}catch(e){console.error("\uc0ac\uc6a9\uc790 \uc0c1\ud0dc\ub97c \uac31\uc2e0\ud558\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}},_=async()=>{try{const e=await l.a.get("/api/get_posture/");p(e.data.postures),L(e.data.postures)}catch(e){console.error("\uc0ac\uc6a9\uc790 \uc790\uc138\ub97c \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}},D=async()=>{try{await l.a.post("/api/update_posture/",{});_()}catch(e){console.error("\uc0ac\uc6a9\uc790 \uc790\uc138\ub97c \uac31\uc2e0\ud558\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}},T=async(e,t)=>{try{console.log("\uc0dd\uccb4 \ub370\uc774\ud130:",e);const a=await l.a.post("/api/predict_model2/",{bio_data:e,status:t});m(a.data.message);const s=y()().format("MM-DD HH:mm:ss"),c="".concat(s," \uae30\uc900, ").concat(null===n||void 0===n?void 0:n.name,"\ub2d8\uc740 \uc751\uae09 \uc0c1\ud0dc\uc785\ub2c8\ub2e4. \uc751\uae09 \ub2e8\uacc4 \uc870\uce58\uc0ac\ud56d ").concat(a.data.message);console.log("alertMessage : ",c),x(c);f(0===t?"black":1===t?"orange":"red")}catch(a){console.error("\ubaa8\ub378 2 \uc608\uce21 \uac12\uc744 \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",a)}},I=e=>{const t=document.getElementById("main");if(!t)return;const a=h.a(t),s=e.sort(((e,t)=>new Date(e.updated_at).getTime()-new Date(t.updated_at).getTime())),c={title:{text:"User Status Over Time",left:"center",textStyle:{fontSize:24,fontWeight:"bold"}},tooltip:{trigger:"axis",formatter:e=>{const t=0===e[0].data[1]?"Normal":1===e[0].data[1]?"Caution":"Danger";return"".concat(e[0].data[0],"<br/>State: ").concat(t)}},xAxis:{type:"category",data:s.map((e=>y()(e.updated_at).format("MM-DD HH:mm:ss"))),axisTick:{alignWithLabel:!0}},yAxis:{type:"category",data:["Normal","Caution","Danger"],axisLabel:{formatter:e=>"Normal"===e?"Normal":"Caution"===e?"Caution":"Danger"===e?"Danger":e},axisTick:{alignWithLabel:!0}},series:[{data:s.map((e=>[y()(e.updated_at).format("MM-DD HH:mm:ss"),e.status])),type:"line",lineStyle:{color:"#5470C6"},itemStyle:{color:e=>0===e.data[1]?"#5470C6":1===e.data[1]?"#fac858":"#ee6666",borderWidth:2},symbolSize:6}]};a.setOption(c)},L=e=>{const t=document.getElementById("posture");if(!t)return;const a=h.a(t),s=e.sort(((e,t)=>new Date(e.updated_at).getTime()-new Date(t.updated_at).getTime())),c=["Downstair","Upstair","Running","Sitdown","StandUp","Walking","Fall"],n=["#5470c6","#91cc75","#fac858","#fc8452","#73c0de","#3ba272","#ee6666"],o={title:{text:"User Posture History",left:"center",textStyle:{fontSize:24,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:e=>{const t=e.findIndex((e=>1===e.data)),a=e[0].axisValue,s=c[t];return"".concat(a,"<br/>Posture: ").concat(s)}},legend:{data:c,top:40,itemWidth:27,itemHeight:17,textStyle:{fontSize:15}},grid:{left:"8%",right:"10%",bottom:"30%",top:"20%",containLabel:!0},xAxis:{type:"category",data:s.map((e=>y()(e.updated_at).format("MM-DD HH:mm:ss"))),axisLabel:{interval:0,rotate:30},axisTick:{alignWithLabel:!0}},yAxis:{type:"category",max:1,data:["","Posture"],axisLabel:{padding:[30,0,30,0]}},series:c.map(((e,t)=>({name:e,type:"bar",stack:"total",emphasis:{focus:"series"},barWidth:"100%",barGap:"0%",data:s.map((e=>e.posture===t?1:0)),itemStyle:{color:n[t]}})))};a.setOption(o),window.addEventListener("resize",(()=>{a.resize()}))};return Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{style:{display:"flex",justifyContent:"flex-end",padding:"10px"},children:Object(j.jsx)("button",{onClick:()=>null!==S&&T(v,S),children:"Check Emergency Status"})}),Object(j.jsx)("div",{style:{textAlign:"center",marginTop:"20px"},children:e&&n?Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("h1",{children:[n.name," (",n.age,"Y), currently on the web"]})}):Object(j.jsx)("h1",{children:"Welcome to the Main Page"})}),g&&Object(j.jsxs)("div",{className:"popup-alert",style:{backgroundColor:"white",border:"1px solid black",padding:"10px"},children:[Object(j.jsx)("span",{style:{color:O||"black"},children:g}),Object(j.jsx)("br",{}),Object(j.jsx)("button",{onClick:()=>{x(null),f(null)},className:"action-text",children:"\ub2eb\uae30"}),Object(j.jsx)("button",{onClick:async()=>{if(window.confirm("\uc2e0\uace0\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))try{await l.a.post("/api/emergency_call/",{}),alert("119\uc5d0 \uc2e0\uace0\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){console.error("\uc2e0\uace0 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e),alert("\uc2e0\uace0 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"action-text",children:"\uc2e0\uace0\ud558\uae30"})]}),Object(j.jsx)("div",{id:"main",style:{width:"100%",height:"400px"}}),Object(j.jsx)("div",{id:"posture",style:{width:"100%",height:"400px",marginTop:"20px"}})]})};a(26);var v=()=>{const[e,t]=Object(s.useState)(null),[a,c]=Object(s.useState)(""),[n,o]=Object(s.useState)(""),i=Object(r.p)();Object(s.useEffect)((()=>{(async()=>{try{const e=await l.a.get("/api/csrf_token/");t(e.data.csrfToken)}catch(e){console.error("CSRF \ud1a0\ud070\uc744 \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}})()}),[]);return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"register-box",children:[Object(j.jsx)("h1",{className:"title",children:"Login"}),Object(j.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await l.a.post("/api/login/",{id:a,password:n},{headers:{"X-CSRFToken":e||""}});console.log("\ub85c\uadf8\uc778 \uc131\uacf5:",t.data),window.location.href="/"}catch(s){console.error("\ub85c\uadf8\uc778 \uc911 \uc624\ub958 \ubc1c\uc0dd:",s)}},children:[Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)("label",{className:"label",children:"ID:"}),Object(j.jsx)("input",{type:"text",value:a,onChange:e=>c(e.target.value),className:"input"})]}),Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)("label",{className:"label",children:"Password:"}),Object(j.jsx)("input",{type:"password",value:n,onChange:e=>o(e.target.value),className:"input"})]}),Object(j.jsx)("button",{type:"submit",className:"action-text",children:"Login"})]}),Object(j.jsx)("button",{className:"login-text",onClick:()=>i("/register"),children:"Create Account"})]})})},N=a(11);a(40);var S=()=>{const[e,t]=Object(s.useState)(null),[a,c]=Object(s.useState)({id:"",password:"",name:"",age:"",address:"",detailed_address:"",phone_num:"",guardian_name:"",guardian_phone_num:""}),[n,o]=Object(s.useState)([]),[i,d]=Object(s.useState)(!1),b=Object(r.p)();Object(s.useEffect)((()=>{(async()=>{const e=await l.a.get("/api/csrf_token/");t(e.data.csrfToken)})()}),[]);const p=e=>{c(Object(N.a)(Object(N.a)({},a),{},{[e.target.name]:e.target.value})),"id"===e.target.name&&d(!1)};return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"register-box",children:[Object(j.jsx)("h1",{className:"title",children:"Register"}),Object(j.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),o([]),i)try{const t=await l.a.post("/api/signup/",a,{headers:{"Content-Type":"application/json","X-CSRFToken":e||""}});console.log("\ud68c\uc6d0\uac00\uc785 \uc131\uacf5:",t.data),b("/login")}catch(s){s.response&&s.response.data?o([s.response.data.message]):o(["\ud68c\uc6d0\uac00\uc785 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."])}else o(["ID \uc911\ubcf5 \uac80\uc0ac\ub97c \uc644\ub8cc\ud574\uc8fc\uc138\uc694."])},children:[Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsx)("label",{className:"label",children:"ID:"}),Object(j.jsxs)("div",{className:"id-input-group",children:[Object(j.jsx)("input",{type:"text",name:"id",value:a.id,onChange:p,className:"input"}),Object(j.jsx)("button",{type:"button",className:"action-text",onClick:async()=>{try{(await l.a.post("/api/check_id/",{id:a.id},{headers:{"Content-Type":"application/json","X-CSRFToken":e||""}})).data.isAvailable?(alert("\uc0ac\uc6a9 \uac00\ub2a5\ud55c ID\uc785\ub2c8\ub2e4."),d(!0)):(alert("\uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc778 ID\uc785\ub2c8\ub2e4."),d(!1))}catch(t){console.error("ID \uc911\ubcf5 \uac80\uc0ac \uc911 \uc624\ub958 \ubc1c\uc0dd:",t),d(!1)}},children:"Check ID"})]})]}),Object.keys(a).map(((e,t)=>0!==t&&Object(j.jsxs)("div",{className:"input-group",children:[Object(j.jsxs)("label",{className:"label",children:[e.replace("_"," ").toUpperCase(),":"]}),Object(j.jsx)("input",{type:"password"===e?"password":"text",name:e,value:a[e],onChange:p,className:"input"})]},e))),Object(j.jsx)("button",{type:"submit",className:"action-text",children:"Submit"})]}),n.length>0&&Object(j.jsx)("div",{className:"error-box",children:n.map(((e,t)=>Object(j.jsx)("p",{children:e},t)))})]})})};var w=()=>Object(j.jsx)(i.a,{children:Object(j.jsx)(x,{children:Object(j.jsxs)(r.c,{children:[Object(j.jsx)(r.a,{path:"/",element:Object(j.jsx)(f,{})}),Object(j.jsx)(r.a,{path:"/login",element:Object(j.jsx)(v,{})}),Object(j.jsx)(r.a,{path:"/register",element:Object(j.jsx)(S,{})})]})})});o.a.render(Object(j.jsx)(c.a.StrictMode,{children:Object(j.jsx)(w,{})}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.7afeb712.chunk.js.map